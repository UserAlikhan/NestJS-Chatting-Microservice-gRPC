syntax = "proto3";

package messaging;

service MessagingService {
    rpc SendMessage(SendMessageRequest) returns (Empty) {}
    rpc ChatStream(stream ChatStreamRequest) returns (stream ChatStreamResponse) {}
}

message ChatStreamResponse {
    string roomId = 1;
    Message message = 2;
}

message ChatStreamRequest {
    string roomId = 1;
}

message SendMessageRequest {
    string roomId = 1;
    Message message = 2;
}

message Empty {}

message Message {
    string message_id = 1;
    string sender_id = 2;
    string receiver_id = 3;
    string content = 4;
    int64 timestamp = 5;
}